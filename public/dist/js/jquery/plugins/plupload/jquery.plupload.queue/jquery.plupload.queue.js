!function($,l){function a(l){return plupload.translate(l)||l}function d(l,d){d.contents().each(function(l,a){a=$(a),a.is(".plupload")||a.remove()}),d.prepend('<div class="plupload_wrapper plupload_scroll"><div id="'+l+'_container" class="plupload_container"><div class="plupload"><div class="plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+a("资料上传")+'</div><div class="plupload_header_text">'+a("（请上传*.jpg,*.png图片格式）")+'</div></div></div><div class="plupload_content"><div class="plupload_filelist_header"><div class="plupload_file_name">'+a("文件名")+'</div><div class="plupload_file_action">&nbsp;</div><div class="plupload_file_status"><span>'+a("状态")+'</span></div><div class="plupload_file_size">'+a("大小")+'</div><div class="plupload_clearer">&nbsp;</div></div><ul id="'+l+'_filelist" class="plupload_filelist"></ul><div class="plupload_filelist_footer"><div class="plupload_file_name"><div class="plupload_buttons"><a href="#" class="plupload_button plupload_add" id="'+l+'_browse">'+a("添加文件")+'</a><a href="#" class="plupload_button plupload_start">'+a("开始上传")+'</a></div><span class="plupload_upload_status"></span></div><div class="plupload_file_action"></div><div class="plupload_file_status"><span class="plupload_total_status">0%</span></div><div class="plupload_file_size"><span class="plupload_total_file_size">0 b</span></div><div class="plupload_progress"><div class="plupload_progress_container"><div class="plupload_progress_bar"></div></div></div><div class="plupload_clearer">&nbsp;</div></div></div></div></div><input type="hidden" id="'+l+'_count" name="'+l+'_count" value="0" /></div>')}var p={};$.fn.pluploadQueue=function(t){return t?(this.each(function(){function e(l){var a;l.status==plupload.DONE&&(a="plupload_done"),l.status==plupload.FAILED&&(a="plupload_failed"),l.status==plupload.QUEUED&&(a="plupload_delete"),l.status==plupload.UPLOADING&&(a="plupload_uploading");var d=$("#"+l.id).attr("class",a).find("a").css("display","block");l.hint&&d.attr("title",l.hint)}function s(){$("span.plupload_total_status",n).html(u.total.percent+"%"),$("div.plupload_progress_bar",n).css("width",u.total.percent+"%"),$("span.plupload_upload_status",n).html(l.sprintf(a("Uploaded %d/%d files"),u.total.uploaded,u.files.length))}function i(){var d,p=$("ul.plupload_filelist",n).html(""),t=0;$.each(u.files,function(l,a){d="",a.status==plupload.DONE&&(a.target_name&&(d+='<input type="hidden" name="'+_+"_"+t+'_tmpname" value="'+plupload.xmlEncode(a.target_name)+'" />'),d+='<input type="hidden" name="'+_+"_"+t+'_name" value="'+plupload.xmlEncode(a.name)+'" />',d+='<input type="hidden" name="'+_+"_"+t+'_status" value="'+(a.status==plupload.DONE?"done":"failed")+'" />',t++,$("#"+_+"_count").val(t)),p.append('<li id="'+a.id+'"><div class="plupload_file_name"><span>'+a.name+'</span></div><div class="plupload_file_action"><a href="#"></a></div><div class="plupload_file_status">'+a.percent+'%</div><div class="plupload_file_size">'+plupload.formatSize(a.size)+'</div><div class="plupload_clearer">&nbsp;</div>'+d+"</li>"),e(a),$("#"+a.id+".plupload_delete a").click(function(l){$("#"+a.id).remove(),u.removeFile(a),l.preventDefault()})}),$("span.plupload_total_file_size",n).html(plupload.formatSize(u.total.size)),0===u.total.queued?$("span.plupload_add_text",n).html(a("Add Files")):$("span.plupload_add_text",n).html(l.sprintf(a("%d files queued"),u.total.queued)),$("a.plupload_start",n).toggleClass("plupload_disabled",u.files.length==u.total.uploaded+u.total.failed),p[0].scrollTop=p[0].scrollHeight,s(),!u.files.length&&u.features.dragdrop&&u.settings.dragdrop&&$("#"+_+"_filelist").append('<li class="plupload_droptext">'+a("拖拽文件到这里.")+"</li>")}function o(){delete p[_],u.destroy(),n.html(r),u=n=r=null}var u,n,_,r;n=$(this),_=n.attr("id"),_||(_=plupload.guid(),n.attr("id",_)),r=n.html(),d(_,n),t=$.extend({dragdrop:!0,browse_button:_+"_browse",container:_},t),t.dragdrop&&(t.drop_element=_+"_filelist"),u=new plupload.Uploader(t),p[_]=u,u.bind("UploadFile",function(l,a){$("#"+a.id).addClass("plupload_current_file")}),u.bind("Init",function(l,a){!t.unique_names&&t.rename&&n.on("click","#"+_+"_filelist div.plupload_file_name span",function(a){var d,p,t,e=$(a.target),s="";d=l.getFile(e.parents("li")[0].id),t=d.name,p=/^(.+)(\.[^.]+)$/.exec(t),p&&(t=p[1],s=p[2]),e.hide().after('<input type="text" />'),e.next().val(t).focus().blur(function(){e.show().next().remove()}).keydown(function(l){var a=$(this);13==l.keyCode&&(l.preventDefault(),d.name=a.val()+s,e.html(d.name),a.blur())})}),$("#"+_+"_container").attr("title","Using runtime: "+a.runtime),$("a.plupload_start",n).click(function(l){$(this).hasClass("plupload_disabled")||u.start(),l.preventDefault()}),$("a.plupload_stop",n).click(function(l){l.preventDefault(),u.stop()}),$("a.plupload_start",n).addClass("plupload_disabled")}),u.bind("Error",function(l,d){var p,t=d.file;t&&(p=d.message,d.details&&(p+=" ("+d.details+")"),d.code==plupload.FILE_SIZE_ERROR&&alert(a("Error: File too large:")+" "+t.name),d.code==plupload.FILE_EXTENSION_ERROR&&alert(a("Error: Invalid file extension:")+" "+t.name),t.hint=p,$("#"+t.id).attr("class","plupload_failed").find("a").css("display","block").attr("title",p)),d.code===plupload.INIT_ERROR&&setTimeout(function(){o()},1)}),u.bind("PostInit",function(l){l.settings.dragdrop&&l.features.dragdrop&&$("#"+_+"_filelist").append('<li class="plupload_droptext">'+a("拖拽文件到这里.")+"</li>")}),u.init(),u.bind("StateChanged",function(){u.state===plupload.STARTED?($("li.plupload_delete a,div.plupload_buttons",n).hide(),u.disableBrowse(!0),$("span.plupload_upload_status,div.plupload_progress,a.plupload_stop",n).css("display","block"),$("span.plupload_upload_status",n).html("Uploaded "+u.total.uploaded+"/"+u.files.length+" files"),t.multiple_queues&&$("span.plupload_total_status,span.plupload_total_file_size",n).show()):(i(),$("a.plupload_stop,div.plupload_progress",n).hide(),$("a.plupload_delete",n).css("display","block"),t.multiple_queues&&u.total.uploaded+u.total.failed==u.files.length&&($(".plupload_buttons,.plupload_upload_status",n).css("display","inline"),u.disableBrowse(!1),$(".plupload_start",n).addClass("plupload_disabled"),$("span.plupload_total_status,span.plupload_total_file_size",n).hide()))}),u.bind("FilesAdded",i),u.bind("FilesRemoved",function(){var l=$("#"+_+"_filelist").scrollTop();i(),$("#"+_+"_filelist").scrollTop(l)}),u.bind("FileUploaded",function(l,a){e(a)}),u.bind("UploadProgress",function(l,a){$("#"+a.id+" div.plupload_file_status",n).html(a.percent+"%"),e(a),s()}),t.setup&&t.setup(u)}),this):p[$(this[0]).attr("id")]}}(jQuery,mOxie);