define(function(require,exports,module){require("jquery");!function($){function t(t,n){if(TCA_FLAG){var e={attr:"sign",url:basePath+"/certsList.json"},r=this,i=r.defs=$.extend(!0,e,t),a="";$(n).find("input").each(function(){r=$(this),"undefined"!=typeof r.attr(i.attr)&&(a+=r.attr("name")+"="+r.val())});var s=null,o=CertStore.listAllCerts();$.ajax({url:i.url,type:"GET",async:!1,cache:!1,success:function(t){var n,e=t.data;for(var r in e)if(void 0!==e[r])for(var i=o.size(),u=0;u<i;u++)if(o.get(u).serialNumber()==e[r].snId){n=o.get(u);break}n&&(s=n.signMessage(a))}}),$(n).append('<input type="hidden" name="sign" value="'+s+'" />')}}t.prototype={init:function(){}},$.fn.FormControl=function(n){for(var e=0,r=this.length;e<r;e++){if($.data(this[e],"FormControl"))return;var i=new t(n,this[e]);$.data(this[e],"FormControl",i)}return this}}(jQuery)});