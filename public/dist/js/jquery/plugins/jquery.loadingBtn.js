define(function(require,exports,module){require("jquery");!function($){function t(i,n){this.options=$.extend({},t.DEFAULTS,i);var o=this;o.loading='<div class="load-container loading"> <div class="loader">'+this.options.loadingText+"</div></div>",o.Btn=$(n);o.Btn.is("input")?"val":"html";"start"==i.action?this.start():"click"==i.action?this.click():"reset"==i.action&&this.reSet()}t.DEFAULTS={loadingText:"提交中...",defaultText:"立即付款",time:0,style:"btnClose",action:"start"},t.prototype={click:function(){var t=this;return t.btnText=t.Btn.text(),t.Btn.on("click",function(){setTimeout($.proxy(function(){$(this).prop("disabled",!0).unbind("click")},this),0)}),t.Btn.addClass(t.options.style).html(t.loading).val(t.loading),t.options.time>0&&setTimeout(function(){t.Btn.removeClass(t.options.style).html(t.btnText)},t.options.time),!1},start:function(){var t=this;setTimeout($.proxy(function(){$(this).attr("disabled",!0)},t.Btn),0),t.Btn.addClass(t.options.style).html(t.loading).val(t.loading)},reSet:function(){var t=this;setTimeout($.proxy(function(){$(this).removeClass(t.options.style).attr("disabled",!1).prop("disabled",!1).html(t.options.defaultText)},t.Btn),0)}},$.fn.loadingBtn=function(i){for(var n=0,o=this.length;n<o;n++){if($.data(this[n],"loadingBtn")&&"click"==i)return;var s=new t(i,this[n]);$.data(this[n],"loadingBtn",s)}return this}}(jQuery)});