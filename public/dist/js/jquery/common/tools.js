define(function(require,exports,module){var $=require("jquery");module.exports={shake:function(){$.fn.shake=function(e,t,a){return this.each(function(){var n=$(this);n.css({position:"relative"});for(var r=1;r<=e;r++)n.animate({left:t*-1},a/e/4).animate({left:t},a/e/2).animate({left:0},a/e/4)}),this}},fixMoney:function(e,a,n){var r=/^[0-9]+(\.[0-9]{1,2})?$/,s=e.replace(/,/g,"");try{if(""==e||null==e||!r.test(s)||0==e){if(s=0,"undefined"!=typeof n){n.val("0");var o=n.attr("name");$("#"+o).val(s)}return}a=a>0&&a<=20?a:2,s=parseFloat((s+"").replace(/[^\d\.-]/g,"")).toFixed(a)+"";var l=s.split(".")[0].split("").reverse(),c=s.split(".")[1];for(t="",i=0;i<l.length;i++)t+=l[i]+((i+1)%3==0&&i+1!=l.length?",":"");var f=t.split("").reverse().join("")+"."+c}catch(e){f=0,s=0}if("undefined"!=typeof n&&null!=n&&"0.00"!=f){var o=n.attr("name");$("#"+o).val(s.replace(/,/g,"")),n.val(f)}return f},moneyFixInput:function(e,t){var e=e||"#amtA";$(e).on({blur:function(){if(module.exports.fixMoney($(e).val(),2,$(e)),a){var t=$(this).parents("form").first(),a=a||"#amtB";!t.validate().element(a)}}})},dateInputLimit:function(){module.exports.formatDate();var e=require("My97DatePicker"),t=(new Date).Format("yyyy-MM-dd");$("#endDate").val(t),$("#beginDate").on("focus",function(){e({isShowClear:!1,readOnly:!0,maxDate:"#F{$dp.$D('endDate')}"})}),$("#endDate").on("focus",function(){e({isShowClear:!1,readOnly:!0,minDate:"#F{$dp.$D('beginDate')}",maxDate:"%y-%M-%d"})})},formatDate:function(){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}},checkMail:function(e){if(""!=e){var t=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,e=/^[a-zA-Z0-9]+([-_.][a-zA-Z0-9]+)*@([a-zA-Z0-9]+[-.])+[a-zA-Z0-9]{2,5}$/;return!(!e.test(e)&&!t.test(e))}},checkMobile:function(e){if(""!=e){var t=/^1[3|4|5|7|8][0-9]\d{4,8}$/;return!!t.test(e)}return!1},AjaxCheckPwd:function(e,t,a){var n=!1;return $.ajax({cache:!1,type:"POST",url:basePath+e,async:!1,data:{pwd:t},dataType:"json",success:function(e){"200"==e.code?(n=!0,$(".fake-pwd").remove()):(a.parent().find(".alertText").html("<em></em>").append('<label class="error">'+e.message+"</label>").css("display","inline"),a.focus())},error:function(){layer.msg("请稍后再试。",{icon:5})}}),n},AjaxCheckMobile:function(e,t){var a=!1;return $.ajax({cache:!0,type:"GET",url:basePath+e,async:!1,data:{mobile:t.val()},dataType:"json",success:function(e){"200"==e.code?a=!0:(t.parent().find(".alertText").html("<em></em>").append('<label class="error">'+e.message+"</label>").css("display","inline"),t.focus())},error:function(){layer.msg("请稍后再试。",{icon:5})}}),a},hiddenPH:function(){$(".placeholder").hide()},showPH:function(){var e=pgeditor.pwdResult();""==e&&$(".placeholder").show()},hideValidateAlert:function(e){var t=$(this).parents("form").first();!t.validate().element(e)}}});