!function($){"use strict";function e(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),$(this).ajaxSubmit(t))}function t(e){var t=e.target,a=$(t);if(!a.is(":submit,input:image")){var r=a.closest(":submit");if(0===r.length)return;t=r[0]}var n=this;if(n.clk=t,"image"==t.type)if(void 0!==e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof $.fn.offset){var i=a.offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function a(){if($.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r={};r.fileapi=void 0!==$("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData,$.fn.ajaxSubmit=function(e){function t(t){for(var a=new FormData,r=0;r<t.length;r++)a.append(t[r].name,t[r].value);if(e.extraData)for(var n in e.extraData)e.extraData.hasOwnProperty(n)&&a.append(n,e.extraData[n]);e.data=null;var i=$.extend(!0,{},$.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:"POST"});e.uploadProgress&&(i.xhr=function(){var t=jQuery.ajaxSettings.xhr();return t.upload&&(t.upload.onprogress=function(t){var a=0,r=t.loaded||t.position,n=t.total;t.lengthComputable&&(a=Math.ceil(r/n*100)),e.uploadProgress(t,r,n,a)}),t}),i.data=null;var o=i.beforeSend;i.beforeSend=function(t,r){r.data=a,o&&o.call(r,t,e)},$.ajax(i)}function n(t){function r(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function n(){function e(){try{var t=r(h).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){a("Server abort: ",e," (",e.name,")"),o(k),y&&clearTimeout(y),y=void 0}}var t=u.attr("target"),n=u.attr("action");T.setAttribute("target",d),i||T.setAttribute("method","POST"),n!=c.url&&T.setAttribute("action",c.url),c.skipEncodingOverride||i&&!/post/i.test(i)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout(function(){b=!0,o(S)},c.timeout));var s=[];try{if(c.extraData)for(var l in c.extraData)c.extraData.hasOwnProperty(l)&&s.push($('<input type="hidden" name="'+l+'">').attr("value",c.extraData[l]).appendTo(T)[0]);c.iframeTarget||(p.appendTo("body"),h.attachEvent?h.attachEvent("onload",o):h.addEventListener("load",o,!1)),setTimeout(e,15),T.submit()}finally{T.setAttribute("action",n),t?T.setAttribute("target",t):u.removeAttr("target"),$(s).remove()}}function o(e){if(!v.aborted&&!E){try{L=r(h)}catch(t){a("cannot access response document: ",t),e=k}if(e===S&&v)return void v.abort("timeout");if(e==k&&v)return void v.abort("server abort");if(L&&L.location.href!=c.iframeSrc||b){h.detachEvent?h.detachEvent("onload",o):h.removeEventListener("load",o,!1);var t,n="success";try{if(b)throw"timeout";var i="xml"==c.dataType||L.XMLDocument||$.isXMLDoc(L);if(a("isXml="+i),!i&&window.opera&&(null===L.body||!L.body.innerHTML)&&--M)return a("requeing onLoad callback, DOM not available"),void setTimeout(o,250);var s=L.body?L.body:L.documentElement;v.responseText=s?s.innerHTML:null,v.responseXML=L.XMLDocument?L.XMLDocument:L,i&&(c.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":c.dataType};return t[e]},s&&(v.status=Number(s.getAttribute("status"))||v.status,v.statusText=s.getAttribute("statusText")||v.statusText);var u=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(u);if(l||c.textarea){var m=L.getElementsByTagName("textarea")[0];if(m)v.responseText=m.value,v.status=Number(m.getAttribute("status"))||v.status,v.statusText=m.getAttribute("statusText")||v.statusText;else if(l){var d=L.getElementsByTagName("pre")[0],g=L.getElementsByTagName("body")[0];d?v.responseText=d.textContent?d.textContent:d.innerText:g&&(v.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==u&&!v.responseXML&&v.responseText&&(v.responseXML=F(v.responseText));try{A=O(v,u,c)}catch(e){n="parsererror",v.error=t=e||n}}catch(e){a("error caught: ",e),n="error",v.error=t=e||n}v.aborted&&(a("upload aborted"),n=null),v.status&&(n=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===n?(c.success&&c.success.call(c.context,A,"success",v),f&&$.event.trigger("ajaxSuccess",[v,c])):n&&(void 0===t&&(t=v.statusText),c.error&&c.error.call(c.context,v,n,t),f&&$.event.trigger("ajaxError",[v,c,t])),f&&$.event.trigger("ajaxComplete",[v,c]),f&&!--$.active&&$.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,v,n),E=!0,c.timeout&&clearTimeout(y),setTimeout(function(){c.iframeTarget||p.remove(),v.responseXML=null},100)}}}var s,l,c,f,d,p,h,v,g,x,b,y,T=u[0],j=!!$.fn.prop;if($(":input[name=submit],:input[id=submit]",T).length)return void alert('Error: Form elements must not have name or id of "submit".');if(t)for(l=0;l<m.length;l++)s=$(m[l]),j?s.prop("disabled",!1):s.removeAttr("disabled");if(c=$.extend(!0,{},$.ajaxSettings,e),c.context=c.context||c,d="jqFormIO"+(new Date).getTime(),c.iframeTarget?(p=$(c.iframeTarget),x=p.attr("name"),x?d=x:p.attr("name",d)):(p=$('<iframe name="'+d+'" src="'+c.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),h=p[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";a("aborting upload... "+t),this.aborted=1,p.attr("src",c.iframeSrc),v.error=t,c.error&&c.error.call(c.context,v,t,e),f&&$.event.trigger("ajaxError",[v,c,t]),c.complete&&c.complete.call(c.context,v,t)}},f=c.global,f&&0===$.active++&&$.event.trigger("ajaxStart"),f&&$.event.trigger("ajaxSend",[v,c]),c.beforeSend&&c.beforeSend.call(c.context,v,c)===!1)return void(c.global&&$.active--);if(!v.aborted){g=T.clk,g&&(x=g.name,x&&!g.disabled&&(c.extraData=c.extraData||{},c.extraData[x]=g.value,"image"==g.type&&(c.extraData[x+".x"]=T.clk_x,c.extraData[x+".y"]=T.clk_y)));var S=1,k=2,w=$("meta[name=csrf-token]").attr("content"),D=$("meta[name=csrf-param]").attr("content");D&&w&&(c.extraData=c.extraData||{},c.extraData[D]=w),c.forceSync?n():setTimeout(n,10);var A,L,E,M=50,F=$.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},X=$.parseJSON||function(e){return window.eval("("+e+")")},O=function(e,t,a){var r=e.getResponseHeader("content-type")||"",n="xml"===t||!t&&r.indexOf("xml")>=0,i=n?e.responseXML:e.responseText;return n&&"parsererror"===i.documentElement.nodeName&&$.error&&$.error("parsererror"),a&&a.dataFilter&&(i=a.dataFilter(i,t)),"string"==typeof i&&("json"===t||!t&&r.indexOf("json")>=0?i=X(i):("script"===t||!t&&r.indexOf("javascript")>=0)&&$.globalEval(i)),i}}}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,s,u=this;"function"==typeof e&&(e={success:e}),i=this.attr("method"),o=this.attr("action"),s="string"==typeof o?$.trim(o):"",s=s||window.location.href||"",s&&(s=(s.match(/^([^#]+)/)||[])[1]),e=$.extend(!0,{url:s,success:$.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",async:!1},e);var l={};if(this.trigger("form-pre-serialize",[this,e,l]),l.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var c=e.traditional;void 0===c&&(c=$.ajaxSettings.traditional);var f,m=[],d=this.formToArray(e.semantic,m);if(e.data&&(e.extraData=e.data,f=$.param(e.data,c)),e.beforeSubmit&&e.beforeSubmit(d,this,e)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[d,this,e,l]),l.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=$.param(d,c);f&&(p=p?p+"&"+f:f),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+p,e.data=null):e.data=p;var h=[];if(e.resetForm&&h.push(function(){u.resetForm()}),e.clearForm&&h.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var v=e.success||function(){};h.push(function(t){var a=e.replaceTarget?"replaceWith":"html";$(e.target)[a](t).each(v,arguments)})}else e.success&&h.push(e.success);e.success=function(t,a,r){for(var n=e.context||e,i=0,o=h.length;i<o;i++)h[i].apply(n,[t,a,r||u,u])};var g=$("input:file:enabled[value]",this),x=g.length>0,b="multipart/form-data",y=u.attr("enctype")==b||u.attr("encoding")==b,T=r.fileapi&&r.formdata;a("fileAPI :"+T);var j=(x||y)&&!T;e.iframe!==!1&&(e.iframe||j)?e.closeKeepAlive?$.get(e.closeKeepAlive,function(){n(d)}):n(d):(x||y)&&T?t(d):$.ajax(e);for(var S=0;S<m.length;S++)m[S]=null;return this.trigger("form-submit-notify",[this,e]),this},$.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&$.isFunction($.fn.on),!r.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!$.isReady&&n.s?(a("DOM not ready, queuing ajaxForm"),$(function(){$(n.s,n.c).ajaxForm(r)}),this):(a("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this)}return r.delegation?($(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,t).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,t),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,e).bind("click.form-plugin",r,t)},$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},$.fn.formToArray=function(e,t){var a=[];if(0===this.length)return a;var n=this[0],i=e?n.getElementsByTagName("*"):n.elements;if(!i)return a;var o,s,u,l,c,f,m;for(o=0,f=i.length;o<f;o++)if(c=i[o],u=c.name)if(e&&n.clk&&"image"==c.type)c.disabled||n.clk!=c||(a.push({name:u,value:$(c).val(),type:c.type}),a.push({name:u+".x",value:n.clk_x},{name:u+".y",value:n.clk_y}));else if(l=$.fieldValue(c,!0),l&&l.constructor==Array)for(t&&t.push(c),s=0,m=l.length;s<m;s++)a.push({name:u,value:l[s]});else if(r.fileapi&&"file"==c.type&&!c.disabled){t&&t.push(c);var d=c.files;if(d.length)for(s=0;s<d.length;s++)a.push({name:u,value:d[s],type:c.type});else a.push({name:u,value:"",type:c.type})}else null!==l&&"undefined"!=typeof l&&(t&&t.push(c),a.push({name:u,value:l,type:c.type,required:c.required}));if(!e&&n.clk){var p=$(n.clk),h=p[0];u=h.name,u&&!h.disabled&&"image"==h.type&&(a.push({name:u,value:p.val()}),a.push({name:u+".x",value:n.clk_x},{name:u+".y",value:n.clk_y}))}return a},$.fn.formSerialize=function(e){return $.param(this.formToArray(e))},$.fn.fieldSerialize=function(e){var t=[];return this.each(function(){var a=this.name;if(a){var r=$.fieldValue(this,e);if(r&&r.constructor==Array)for(var n=0,i=r.length;n<i;n++)t.push({name:a,value:r[n]});else null!==r&&"undefined"!=typeof r&&t.push({name:this.name,value:r})}}),$.param(t)},$.fn.fieldValue=function(e){for(var t=[],a=0,r=this.length;a<r;a++){var n=this[a],i=$.fieldValue(n,e);null===i||"undefined"==typeof i||i.constructor==Array&&!i.length||(i.constructor==Array?$.merge(t,i):t.push(i))}return t},$.fieldValue=function(e,t){var a=e.name,r=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!a||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==n&&e.selectedIndex==-1))return null;if("select"==n){var i=e.selectedIndex;if(i<0)return null;for(var o=[],s=e.options,u="select-one"==r,l=u?i+1:s.length,c=u?i:0;c<l;c++){var f=s[c];if(f.selected){var m=f.value;if(m||(m=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),u)return m;o.push(m)}}return o}return $(e).val()},$.fn.clearForm=function(e){return this.each(function(){$("input,select,textarea",this).clearFields(e)})},$.fn.clearFields=$.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,r=this.tagName.toLowerCase();t.test(a)||"textarea"==r?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==r?this.selectedIndex=-1:e&&(e===!0&&/hidden/.test(a)||"string"==typeof e&&$(this).is(e))&&(this.value="")})},$.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},$.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},$.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=e;else if("option"==this.tagName.toLowerCase()){var a=$(this).parent("select");e&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=e}})},$.fn.ajaxSubmit.debug=!1}(jQuery);