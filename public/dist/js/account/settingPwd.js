define(function(require,exports,module){var $=require("jquery");require("amazeUI"),module.exports={settingPwd:function(){require("jquery.validate");var e=$("#settingPwdForm");e.validate({debug:!0,rules:{reLoginPwd:{required:!0,byteRangeLength:[6,30],equalTo:"#loginPwd"},loginPwd:{required:!0,byteRangeLength:[6,30]}},messages:{reLoginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码",equalTo:"两次密码不一致"},loginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码"}},ignore:"#PWD",errorPlacement:function(e,n){},invalidHandler:function(e,n){$.each(n.errorList,function(e,n){var t=$(n.element),r=t.parent();t.offset();return r.append('<div class="vld-tooltip">'+n.message+"</div>"),!1})},success:function(e,n){$(n).parent().find(".vld-tooltip").remove()},submitHandler:function(e){var n=new require("safe/jsencrypt").encrypt();n.setPublicKey(publicKey),$.ajax({url:basePath+"/user/resetPwd",mockUrl:"/account/settingPwd",type:"POST",data:{loginId:$("#loginId").val(),password:n.encrypt($("#loginPwd").val())},success:function(e){"200"==e.code?location.href=e.data.gto:layer.msg(e.message,{icon:2})},error:function(e,n,t){}})}})},memberSettingPwd:function(){require("jquery.validate");var e=$("#settingPwdForm");e.validate({debug:!0,rules:{reLoginPwd:{required:!0,byteRangeLength:[6,30],equalTo:"#loginPwd"},loginPwd:{required:!0,byteRangeLength:[6,30]}},messages:{reLoginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码",equalTo:"两次密码不一致"},loginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码"}},ignore:"#PWD",errorPlacement:function(e,n){},invalidHandler:function(e,n){$.each(n.errorList,function(e,n){var t=$(n.element),r=t.parent();t.offset();return r.append('<div class="vld-tooltip">'+n.message+"</div>"),!1})},success:function(e,n){$(n).parent().find(".vld-tooltip").remove()},submitHandler:function(e){var n=new require("safe/jsencrypt").encrypt();n.setPublicKey(publicKey),$.ajax({url:basePath+"/myaccount/setting",mockUrl:"/account/settingPwd",type:"POST",data:{loginId:$("#loginId").val(),password:n.encrypt($("#loginPwd").val())},success:function(e){"200"==e.code?location.href=e.data.gto:layer.msg(e.message,{icon:2})},error:function(e,n,t){}})}})},settingPayPwd:function(){require("jquery.validate");var e=$("#settingPwdForm");e.validate({debug:!0,rules:{reLoginPwd:{required:!0,byteRangeLength:[6,30],equalTo:"#loginPwd"},loginPwd:{required:!0,byteRangeLength:[6,30]}},messages:{reLoginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码",equalTo:"两次密码不一致"},loginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码"}},ignore:"#PWD",errorPlacement:function(e,n){},invalidHandler:function(e,n){$.each(n.errorList,function(e,n){var t=$(n.element),r=t.parent();t.offset();return r.append('<div class="vld-tooltip">'+n.message+"</div>"),!1})},success:function(e,n){$(n).parent().find(".vld-tooltip").remove()},submitHandler:function(e){var n=new require("safe/jsencrypt").encrypt();n.setPublicKey(publicKey),$.ajax({url:basePath+"/myaccount/paySetting",mockUrl:"/account/settingPwd",type:"POST",data:{loginId:$("#loginId").val(),password:n.encrypt($("#loginPwd").val())},success:function(e){"200"==e.code?location.href=e.data.gto:layer.msg(e.message,{icon:2})},error:function(e,n,t){}})}})},resetPwd:function(){require("jquery.validate");var e=$("#settingPwdForm");e.validate({debug:!0,rules:{reLoginPwd:{required:!0,byteRangeLength:[6,30],equalTo:"#loginPwd"},loginPwd:{required:!0,byteRangeLength:[6,30]}},messages:{reLoginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码",equalTo:"两次密码不一致"},loginPwd:{required:"请输入密码",byteRangeLength:"请输入正确的密码"}},ignore:"#PWD",errorPlacement:function(e,n){},invalidHandler:function(e,n){$.each(n.errorList,function(e,n){var t=$(n.element),r=t.parent();t.offset();return r.append('<div class="vld-tooltip">'+n.message+"</div>"),!1})},success:function(e,n){$(n).parent().find(".vld-tooltip").remove()},submitHandler:function(e){var n=new require("safe/jsencrypt").encrypt();$.ajax({url:basePath+"/user/resetPwd",mockUrl:"/account/login",type:"POST",data:{loginId:$("#loginId").val(),password:n.encrypt($("#loginPwd").val())},success:function(e){"200"==e.code?location.href=e.data.gto:layer.msg(e.message,{icon:2})},error:function(e,n,t){}})}})}}});